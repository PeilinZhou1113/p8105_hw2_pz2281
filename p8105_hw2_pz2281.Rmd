---
title: "p8105_hw2_pz2281"
author: Peilin Zhou
output: github_document
---

```{r setup, include=FALSE}
library(tidyverse)
```
## Problem 1

Read in Mr.Trash Wheel data

Tidy Mr.Trash Wheel dataset
```{r}
trash_wheel_df = 
  readxl::read_excel("./data/Trash_Wheel.xlsx", range = "A2:N406") %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(sports_balls = round(sports_balls))
```

Import and tidy precipitation data for 2018 and 2019

```{r}
pre_2018 = 
  readxl::read_excel("./data/Trash_Wheel.xlsx", sheet = 5, range = "A2:B14") %>%
  janitor::clean_names() %>% 
  mutate(year = "2018")

pre_2019 = 
  readxl::read_excel("./data/Trash_Wheel.xlsx", sheet = 4, range = "A2:B8") %>% 
  janitor::clean_names() %>% 
  mutate(year = "2019")
```

Combine data

```{r}
 tidy_pre = 
  bind_rows(pre_2018,pre_2019) %>% 
  relocate(year) %>% 
  mutate(month = month.name[month])
```



Data Summaries

The Mr.Trash Wheel dataset contains litter data for total of `r nrow(trash_wheel_df)` dumpsters through `r length(unique(trash_wheel_df$year))` years. There are `r ncol(trash_wheel_df)` variables in this dataset. For all of the dumpsters, the average number of plastic bottles they received through the five-year span is `r round(mean(trash_wheel_df$plastic_bottles))` and the average number of cigarette butts is `r round(mean(trash_wheel_df$cigarette_butts))`. The amount of total litter that that trash wheel had collected in 5 years is `r sum(trash_wheel_df$weight_tons)` tons.

The number of observation is `r nrow(pre_2018)` for the 2018 precipitation data and `r nrow(pre_2019)` for the 2019 data. Both datasets have `r ncol(pre_2018)` variables, including month, year, and precipitation amount in inches. The total amount of precipitation in 2018 was `r sum(pre_2018$total)` inches and the average amount  was `r mean(pre_2018$total)` inches. The total amount of precipitation in 2019 (data for `r nrow(pre_2019)` months) was `r sum(pre_2019$total)` inches and the median was `r median(pre_2019$total)` inches. The conmbined dataset contains precipitation data for both 2018 and 2019. The total amount of precipitation was `r sum(tidy_pre$total)` and the average was `r mean(tidy_pre$total)`.

## Problem 2

Import and tidy pols-month data

```{r, message = FALSE}
pols_month =
  read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>% 
  separate(mon, into = c("year", "month","day"), sep = "-") %>% 
  mutate(month = as.numeric(month)) %>% 
  mutate(month = month.name[month]) %>% 
  mutate(president = ifelse(prez_gop == 1, "gop", "dem")) %>% 
  select(-prez_dem,-prez_gop,-day)
```

Import and tidy snp data

```{r, message = FALSE}
snp_df = 
  read_csv("./data/fivethirtyeight_datasets/snp.csv") %>% 
  mutate(date = lubridate::mdy(date)) %>% 
  separate(date, into = c("year","month", "day"), sep = "-") %>%
  mutate(month = as.numeric(month)) %>%
  mutate(month = month.name[month]) %>% 
  arrange(year,month) %>% 
  relocate(year,month) %>% 
  select(-day)
```

Import and tidy unemployment data

```{r, message = FALSE}
unemp_df = 
  read_csv("./data/fivethirtyeight_datasets/unemployment.csv") %>% 
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemployment") %>% 
  mutate(month = match(month,month.abb)) %>% 
  mutate(month = month.name[month]) %>% 
  janitor::clean_names() %>% 
  mutate(year = as.character(year))
```

Merge snp_df to pols_month and then merge unemp_df into the merged data using `left_join`

```{r}
pols_snp_df = left_join(pols_month, snp_df, by = c("year", "month"))

merge_df = left_join(pols_snp_df, unemp_df, by = c("year", "month"))
```









